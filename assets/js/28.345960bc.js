(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{195:function(t,e,s){"use strict";s.r(e);var a=s(0),_=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"koa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#koa","aria-hidden":"true"}},[t._v("#")]),t._v(" Koa")]),t._v(" "),s("ul",[s("li",[t._v("代码编写上避免了多层的嵌套异步函数调用 async await来解决异步\n"),s("ul",[s("li",[t._v("async  await 需要依赖于promise")])])]),t._v(" "),s("li",[t._v("更轻...  减少了内置的中间件  express.static处理静态资源的内置中间件  express.Router() 路由")]),t._v(" "),s("li",[t._v("启动步骤\n"),s("ol",[s("li",[t._v("引入Koa构造函数对象 "),s("code",[t._v("const Koa = require('koa')")])]),t._v(" "),s("li",[t._v("创建服务器示例对象 "),s("code",[t._v("const app = new Koa();")])]),t._v(" "),s("li",[t._v("配置中间件 "),s("code",[t._v("app.use(做什么?)")])]),t._v(" "),s("li",[t._v("监听端口启动服务器 "),s("code",[t._v("app.listen(8888);")])])])]),t._v(" "),s("li",[t._v("做什么? (函数参数说明)\n"),s("ul",[s("li",[t._v("context上下文对象: 该对象类似原生http中的 req + res\n"),s("ul",[s("li",[t._v("该对象的req,res属性也存在，就是原生没有包装过的req,res")]),t._v(" "),s("li",[t._v("简单说:  context 对象就是从请求到响应 过程中的一个描述对象")])])]),t._v(" "),s("li",[t._v("next函数:调用下一个中间件")])])]),t._v(" "),s("li",[t._v("request(请求对象):  其中包含客户端请求的相关信息")]),t._v(" "),s("li",[t._v("response(响应对象): 包含响应数据的具体操作")])]),t._v(" "),s("h2",{attrs:{id:"request常用属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request常用属性","aria-hidden":"true"}},[t._v("#")]),t._v(" request常用属性")]),t._v(" "),s("ul",[s("li",[t._v("ctx.request.url(ctx.url)")]),t._v(" "),s("li",[t._v("ctx.request.method(ctx.method)")]),t._v(" "),s("li",[t._v("ctx.request.headers(ctx.headers)")])]),t._v(" "),s("h2",{attrs:{id:"response常用属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response常用属性","aria-hidden":"true"}},[t._v("#")]),t._v(" response常用属性")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ctx.response.set(ctx.set)  "),s("strong",[t._v("函数:参数key,val")])])]),t._v(" "),s("li",[s("p",[t._v("ctx.response.status(ctx.status)")])]),t._v(" "),s("li",[s("p",[t._v("ctx.response.body(ctx.body)")])])]),t._v(" "),s("h2",{attrs:{id:"小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小结","aria-hidden":"true"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),s("ul",[s("li",[t._v("以上所有使用的属性,都可以简写 ctx.xxx")]),t._v(" "),s("li",[t._v("使用async await的应用场景,如果你出现了异步操作,使用其,  后一个中间件使用了async,前后都使用")]),t._v(" "),s("li",[t._v("三主角: "),s("strong",[t._v("函数前面 async, 内部才能await,要想await能有用,就用promise包裹他")])])]),t._v(" "),s("h2",{attrs:{id:"第三方中间件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三方中间件","aria-hidden":"true"}},[t._v("#")]),t._v(" 第三方中间件")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("处理请求体 "),s("strong",[t._v("koa-bodyparser")])]),t._v(" "),s("ul",[s("li",[t._v("非GET请求，比如说post请求 ，包括表单提交的form内的数据，都能轻松获取")]),t._v(" "),s("li",[t._v("ctx.request.body 获取form中的数据")])])]),t._v(" "),s("li",[s("p",[t._v("处理路由 "),s("strong",[t._v("koa-router")])]),t._v(" "),s("ul",[s("li",[t._v("获取查询字符串 ctx.query")]),t._v(" "),s("li",[t._v("获取/xxx/:id      ctx.params.id")]),t._v(" "),s("li",[t._v("koa-bodyparser是解析请求体数据的，koa-router中可以通过ctx.query||ctx.params获取url上的参数")])])]),t._v(" "),s("li",[s("p",[t._v("处理静态资源 "),s("strong",[t._v("koa-static")])])]),t._v(" "),s("li",[s("p",[t._v("渲染页面 "),s("strong",[t._v("koa-art-template")])]),t._v(" "),s("ul",[s("li",[t._v("koa与视图通信的对象 "),s("strong",[t._v("ctx.state")])])])]),t._v(" "),s("li",[s("p",[t._v("session中间件 "),s("strong",[t._v("koa_session")])]),t._v(" "),s("ul",[s("li",[t._v("sign：true   会生成一个关于cookie数据保障不被修改的签名，如果数据改了，但是签名还是之前的状态，就说明数据不安全")]),t._v(" "),s("li",[t._v("app.keys 必须要，内部通过该值进行标识或者说计算")]),t._v(" "),s("li",[t._v("操作session   "),s("strong",[t._v("ctx.session.xxx")])])])])])])}],!1,null,null,null);e.default=_.exports}}]);