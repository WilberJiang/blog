<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP核心模块 | Wilber-姜波</title>
    <meta name="description" content="姜波的个人网站">
    <link rel="icon" href="/blog/icon/favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.30595269.css" as="style"><link rel="preload" href="/blog/assets/js/app.cd55051b.js" as="script"><link rel="preload" href="/blog/assets/js/27.2382688e.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.77b360f9.js"><link rel="prefetch" href="/blog/assets/js/11.6fed2ed0.js"><link rel="prefetch" href="/blog/assets/js/12.45fcac97.js"><link rel="prefetch" href="/blog/assets/js/13.a36f0544.js"><link rel="prefetch" href="/blog/assets/js/14.09973c4a.js"><link rel="prefetch" href="/blog/assets/js/15.58167e64.js"><link rel="prefetch" href="/blog/assets/js/16.b672a490.js"><link rel="prefetch" href="/blog/assets/js/17.063d4ceb.js"><link rel="prefetch" href="/blog/assets/js/18.19d6ca7e.js"><link rel="prefetch" href="/blog/assets/js/19.6ba4fc17.js"><link rel="prefetch" href="/blog/assets/js/2.d931aa0b.js"><link rel="prefetch" href="/blog/assets/js/20.7e7fcc4e.js"><link rel="prefetch" href="/blog/assets/js/21.70d2e103.js"><link rel="prefetch" href="/blog/assets/js/22.835e718b.js"><link rel="prefetch" href="/blog/assets/js/23.783c1181.js"><link rel="prefetch" href="/blog/assets/js/24.63be1340.js"><link rel="prefetch" href="/blog/assets/js/25.f6480a6d.js"><link rel="prefetch" href="/blog/assets/js/26.04b2c4fe.js"><link rel="prefetch" href="/blog/assets/js/28.345960bc.js"><link rel="prefetch" href="/blog/assets/js/29.b2ceaae7.js"><link rel="prefetch" href="/blog/assets/js/3.729ebb14.js"><link rel="prefetch" href="/blog/assets/js/30.e5da16d0.js"><link rel="prefetch" href="/blog/assets/js/31.fe858abb.js"><link rel="prefetch" href="/blog/assets/js/32.0226b2b2.js"><link rel="prefetch" href="/blog/assets/js/4.8d9cff3d.js"><link rel="prefetch" href="/blog/assets/js/5.d73792fa.js"><link rel="prefetch" href="/blog/assets/js/6.0fc8d69e.js"><link rel="prefetch" href="/blog/assets/js/7.fb18cbd8.js"><link rel="prefetch" href="/blog/assets/js/8.b1c62d01.js"><link rel="prefetch" href="/blog/assets/js/9.79816390.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.30595269.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Wilber-姜波</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术归纳</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/HTML5/Canvas.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/blog/CSS3/Background.html" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Senior.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Base.html" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/blog/Flutter/Record.html" class="nav-link">Flutter</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术归纳</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/HTML5/Canvas.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/blog/CSS3/Background.html" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Senior.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Base.html" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/blog/Flutter/Record.html" class="nav-link">Flutter</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/Node.js/Base.html" class="sidebar-link">Node基础</a></li><li><a href="/blog/Node.js/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/blog/Node.js/HTTP.html" class="active sidebar-link">HTTP核心模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#http超文本传输协议" class="sidebar-link">http超文本传输协议</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#主体对象" class="sidebar-link">主体对象</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#状态码分类" class="sidebar-link">状态码分类</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#创建服务器步骤" class="sidebar-link">创建服务器步骤</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#请求报文对象-只读" class="sidebar-link">请求报文对象(只读)</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#获取请求体数据" class="sidebar-link">获取请求体数据</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#响应对象" class="sidebar-link">响应对象</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#请求与响应" class="sidebar-link">请求与响应</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#响应体数据" class="sidebar-link">响应体数据</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#http总结梳理" class="sidebar-link">http总结梳理</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#querystring核心对象" class="sidebar-link">querystring核心对象</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#跨域问题" class="sidebar-link">跨域问题</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#jsonp" class="sidebar-link">jsonp</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#代理" class="sidebar-link">代理</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/HTTP.html#配置https" class="sidebar-link">配置https</a></li></ul></li><li><a href="/blog/Node.js/Express.html" class="sidebar-link">Express</a></li><li><a href="/blog/Node.js/MongoDB.html" class="sidebar-link">MongoDB</a></li><li><a href="/blog/Node.js/Koa.html" class="sidebar-link">Koa</a></li><li><a href="/blog/Node.js/Socket.io.html" class="sidebar-link">Socket.io</a></li><li><a href="/blog/Node.js/MySQL.html" class="sidebar-link">MySQL</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="http核心模块"><a href="#http核心模块" aria-hidden="true" class="header-anchor">#</a> HTTP核心模块</h1> <h2 id="http超文本传输协议"><a href="#http超文本传输协议" aria-hidden="true" class="header-anchor">#</a> http超文本传输协议</h2> <ul><li><p>协议至少双方 -&gt; http双方！！</p> <ul><li>客户端(浏览器)    -&gt; 服务器  BS</li></ul> <ul><li>原生应用(QQ)  -&gt; 服务器 CS</li></ul></li> <li><p>就是数据如何传输</p></li> <li><p>特点:</p> <ul><li>一问一答（先有请求，后有响应）</li> <li>5大特点：
<ul><li>轻便/    简单快速       支持客户/服务器模式</li> <li>无连接（不为每一个请求保持住链接）</li> <li>无状态( 服务器不记得客户端是谁 ) -&gt; cookie</li></ul></li></ul></li></ul> <h2 id="主体对象"><a href="#主体对象" aria-hidden="true" class="header-anchor">#</a> 主体对象</h2> <ul><li>服务器对象 <code>http.createServer();</code></li> <li>客户端对象<code>http.request({host:'www.baidu.com'});</code></li> <li>请求报文对象(对于服务器来说，是可读)  req</li> <li>响应报文对象(对于服务器来说，是可写) res</li></ul> <h2 id="状态码分类"><a href="#状态码分类" aria-hidden="true" class="header-anchor">#</a> 状态码分类</h2> <ul><li>1 开头，正在进行中</li> <li>2开头，完成</li> <li>3开头 ，重定向</li> <li>4开头 ， 客户端异常</li> <li>5开头， 服务器异常</li></ul> <h2 id="创建服务器步骤"><a href="#创建服务器步骤" aria-hidden="true" class="header-anchor">#</a> 创建服务器步骤</h2> <ul><li>1:引入http核心对象</li> <li>2:利用http核心对象的.createServer(callback); 创建服务器对象</li> <li>3:使用服务器对象.listen(端口,ip地址) 开启服务器</li> <li>4:callback(req,res) 根据请求处理响应</li></ul> <h2 id="请求报文对象-只读"><a href="#请求报文对象-只读" aria-hidden="true" class="header-anchor">#</a> 请求报文对象(只读)</h2> <ul><li>请求首行中的url <code>req.url</code></li> <li>请求首行中的请求方式 <code>req.method</code></li> <li>请求头中的数据<code>req.headers</code>  是一个对象</li> <li>头信息中，也可以作为与服务器交互的一种途径</li></ul> <h2 id="获取请求体数据"><a href="#获取请求体数据" aria-hidden="true" class="header-anchor">#</a> 获取请求体数据</h2> <ul><li><p>代码对比</p></li> <li><p>浏览器:  $('#xx').on('submit',function(e){    })</p></li> <li><p>服务器:  req.on('data',function(d){ d.toString(); })</p></li></ul> <h2 id="响应对象"><a href="#响应对象" aria-hidden="true" class="header-anchor">#</a> 响应对象</h2> <ul><li>响应首行 <code>res.writeHead(状态码)</code></li> <li>写响应头
<ul><li>一次性写回头信息
<ul><li><code>res.writeHead(200,headers)</code></li></ul></li> <li>多次设置头信息
<ul><li><code>res.setHeader(key,value);</code></li></ul></li></ul></li> <li>写响应体
<ul><li>一次性写回响应体
<ul><li><code>res.end();</code></li></ul></li> <li>多次写回响应体
<ul><li><code>res.write();</code></li></ul></li></ul></li></ul> <h2 id="请求与响应"><a href="#请求与响应" aria-hidden="true" class="header-anchor">#</a> 请求与响应</h2> <ul><li>头行体</li> <li>content-type是对请求或者响应体数据，做出的说明</li></ul> <h2 id="响应体数据"><a href="#响应体数据" aria-hidden="true" class="header-anchor">#</a> 响应体数据</h2> <ul><li>res.write('字符串'||读出文件的二进制数据)</li> <li>res.end('字符串'||读出文件的二进制数)</li></ul> <h2 id="http总结梳理"><a href="#http总结梳理" aria-hidden="true" class="header-anchor">#</a> http总结梳理</h2> <ul><li>http故事剧情中的主角 :  服务器（女）（响应报文） 客户端（男）（请求报文）
<ul><li>因为都是男人主动找女人</li> <li>服务器:http.createServer创建服务器，监听端口listen，处理响应on('request',(req,res)=&gt; { })</li> <li>请求报文： 由于我们是服务端代码，所以该报文是浏览器发的，我们看就行了
<ul><li>头行体（异步）</li></ul></li> <li>响应保温：由于我们是服务端代码，所以响应报文，我们写就行了
<ul><li>头行体
<ul><li>头设置1次，和多次</li> <li>体写1次和多次</li></ul></li></ul></li></ul></li></ul> <h2 id="querystring核心对象"><a href="#querystring核心对象" aria-hidden="true" class="header-anchor">#</a> querystring核心对象</h2> <ul><li>querystring.parse(formStr)</li> <li>username=jack&amp;password=123转换成如下</li> <li>{ username: 'jack', password: '123' }</li></ul> <h2 id="跨域问题"><a href="#跨域问题" aria-hidden="true" class="header-anchor">#</a> 跨域问题</h2> <ul><li>传统开发方式:前端代码及请求数据接口都在同一个服务器上,前端代码测试依赖服务器</li> <li>前后端分离:
<ul><li>静态服务器: 运行前端代码</li> <li>后台服务器: 运行数据接口服务器</li> <li><strong>互不影响,浏览器向其他服务器发送ajax请求,会产生跨域</strong></li></ul></li></ul> <h2 id="jsonp"><a href="#jsonp" aria-hidden="true" class="header-anchor">#</a> jsonp</h2> <ul><li><p>知识点补充</p></li> <li><p>url核心对象</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'http://xxx.com?id=1'</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二个参数是将id=1转换成对象</span>
    <span class="token comment">// output:  { protocal:'http',..省略..query:{id:1}   }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="cors"><a href="#cors" aria-hidden="true" class="header-anchor">#</a> CORS</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>  Access-Control-Allow-Origin: 'http://xxx.com'  //允许哪个域在跨域的时候访问,*代表所有
  // 告诉浏览器,跨域时允许有cookie,同时客户端也要设置withCredentials:true + Origin不能是*
  Access-Control-Allow-Credentials: true  
  Access-Control-Allow-Methods: 'GET,POST,PUT,DELETE';   // 默认允许get/post
  Access-Control-Allow-Headers:'xxx';   // 允许你自己加的头来通信
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>浏览器在非简单请求(get/post)||包含自定义头||content-type非键值对的时候,会先请示服务器,来一个OPTIONS请求,如果不满足,拒绝发送ajax请求</li></ul> <h2 id="代理"><a href="#代理" aria-hidden="true" class="header-anchor">#</a> 代理</h2> <ul><li>下载依赖包便于请求操作 <code>npm i request -S</code></li></ul> <h2 id="配置https"><a href="#配置https" aria-hidden="true" class="header-anchor">#</a> 配置https</h2> <ul><li>公钥  公开的加密方式</li> <li>私钥  存在服务器的唯一解公钥加密的方式</li> <li>签名  确保数据的一致性</li> <li>证书  确保当前发送数据单位可信</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/Node.js/Nginx.html" class="prev">
          Nginx
        </a></span> <span class="next"><a href="/blog/Node.js/Express.html">
          Express
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/app.cd55051b.js" defer></script><script src="/blog/assets/js/27.2382688e.js" defer></script>
  </body>
</html>
