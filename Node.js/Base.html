<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node基础 | Wilber-姜波</title>
    <meta name="description" content="姜波的个人网站">
    <link rel="icon" href="/blog/icon/favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.30595269.css" as="style"><link rel="preload" href="/blog/assets/js/app.cd55051b.js" as="script"><link rel="preload" href="/blog/assets/js/4.8d9cff3d.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.77b360f9.js"><link rel="prefetch" href="/blog/assets/js/11.6fed2ed0.js"><link rel="prefetch" href="/blog/assets/js/12.45fcac97.js"><link rel="prefetch" href="/blog/assets/js/13.a36f0544.js"><link rel="prefetch" href="/blog/assets/js/14.09973c4a.js"><link rel="prefetch" href="/blog/assets/js/15.58167e64.js"><link rel="prefetch" href="/blog/assets/js/16.b672a490.js"><link rel="prefetch" href="/blog/assets/js/17.063d4ceb.js"><link rel="prefetch" href="/blog/assets/js/18.19d6ca7e.js"><link rel="prefetch" href="/blog/assets/js/19.6ba4fc17.js"><link rel="prefetch" href="/blog/assets/js/2.d931aa0b.js"><link rel="prefetch" href="/blog/assets/js/20.7e7fcc4e.js"><link rel="prefetch" href="/blog/assets/js/21.70d2e103.js"><link rel="prefetch" href="/blog/assets/js/22.835e718b.js"><link rel="prefetch" href="/blog/assets/js/23.783c1181.js"><link rel="prefetch" href="/blog/assets/js/24.63be1340.js"><link rel="prefetch" href="/blog/assets/js/25.f6480a6d.js"><link rel="prefetch" href="/blog/assets/js/26.04b2c4fe.js"><link rel="prefetch" href="/blog/assets/js/27.2382688e.js"><link rel="prefetch" href="/blog/assets/js/28.345960bc.js"><link rel="prefetch" href="/blog/assets/js/29.b2ceaae7.js"><link rel="prefetch" href="/blog/assets/js/3.729ebb14.js"><link rel="prefetch" href="/blog/assets/js/30.e5da16d0.js"><link rel="prefetch" href="/blog/assets/js/31.fe858abb.js"><link rel="prefetch" href="/blog/assets/js/32.0226b2b2.js"><link rel="prefetch" href="/blog/assets/js/5.d73792fa.js"><link rel="prefetch" href="/blog/assets/js/6.0fc8d69e.js"><link rel="prefetch" href="/blog/assets/js/7.fb18cbd8.js"><link rel="prefetch" href="/blog/assets/js/8.b1c62d01.js"><link rel="prefetch" href="/blog/assets/js/9.79816390.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.30595269.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Wilber-姜波</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术归纳</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/HTML5/Canvas.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/blog/CSS3/Background.html" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Senior.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Base.html" class="nav-link router-link-exact-active router-link-active">Node.js</a></li><li class="dropdown-item"><!----> <a href="/blog/Flutter/Record.html" class="nav-link">Flutter</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术归纳</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/HTML5/Canvas.html" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/blog/CSS3/Background.html" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Senior.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Base.html" class="nav-link router-link-exact-active router-link-active">Node.js</a></li><li class="dropdown-item"><!----> <a href="/blog/Flutter/Record.html" class="nav-link">Flutter</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/Node.js/Base.html" class="active sidebar-link">Node基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#为什么学习node" class="sidebar-link">为什么学习Node?</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#nodejs特点" class="sidebar-link">NodeJS特点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#基本使用" class="sidebar-link">基本使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#内置对象介绍" class="sidebar-link">内置对象介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#分类" class="sidebar-link">分类</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#process（全局对象）" class="sidebar-link">process（全局对象）</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#filename-dirname（全局对象）" class="sidebar-link">filename/dirname（全局对象）</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#nodejs实现规范" class="sidebar-link">nodejs实现规范</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#核心对象path" class="sidebar-link">核心对象path</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#模块" class="sidebar-link">模块</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#fs文件模块" class="sidebar-link">fs文件模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#操作文件对象" class="sidebar-link">操作文件对象</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#遍历文件夹下的文件" class="sidebar-link">遍历文件夹下的文件</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#包（文件夹）" class="sidebar-link">包（文件夹）</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#npm-yarn" class="sidebar-link">npm|| yarn</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#nrm是npm的镜像源管理工具" class="sidebar-link">nrm是npm的镜像源管理工具</a></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#包的加载机制" class="sidebar-link">包的加载机制</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Node.js/Base.html#事件队列" class="sidebar-link">事件队列</a></li></ul></li><li><a href="/blog/Node.js/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/blog/Node.js/HTTP.html" class="sidebar-link">HTTP核心模块</a></li><li><a href="/blog/Node.js/Express.html" class="sidebar-link">Express</a></li><li><a href="/blog/Node.js/MongoDB.html" class="sidebar-link">MongoDB</a></li><li><a href="/blog/Node.js/Koa.html" class="sidebar-link">Koa</a></li><li><a href="/blog/Node.js/Socket.io.html" class="sidebar-link">Socket.io</a></li><li><a href="/blog/Node.js/MySQL.html" class="sidebar-link">MySQL</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="node基础"><a href="#node基础" aria-hidden="true" class="header-anchor">#</a> Node基础</h1> <h2 id="为什么学习node"><a href="#为什么学习node" aria-hidden="true" class="header-anchor">#</a> 为什么学习Node?</h2> <ul><li>IO优势
<ul><li>对于文件读写,Node采用的是非阻塞IO</li> <li><strong>传统IO在读写文件的时候CPU来处理,而代码执行也处于等待中,浪费性能</strong></li> <li><strong>非阻塞IO将读写操作交给CPU,而代码正常执行,减少等待浪费的性能</strong></li></ul></li> <li>应用场景
<ul><li>实际应用: webpack/gulp/npm/http-server/json-server</li> <li>服务器中负责IO读写的中间层服务器(天猫中间层IO服务器)</li></ul></li></ul> <h2 id="nodejs特点"><a href="#nodejs特点" aria-hidden="true" class="header-anchor">#</a> NodeJS特点</h2> <ul><li>其移植了chrome V8 引擎,解析和执行代码机制和浏览器js相同</li> <li>其沿用了JavaScript语法、另外扩展了自己需要的功能</li> <li>总结: nodejs  是一个后端语言 ,  其具备操作文件的能力,  可以具备服务器的创建和操作能力
<ul><li>其语法是JavaScript语法,代码运行在chrome V8 引擎之上</li></ul></li></ul> <h3 id="基本使用"><a href="#基本使用" aria-hidden="true" class="header-anchor">#</a> 基本使用</h3> <ul><li>官网上下载 node-v-xx.msi 傻瓜式的安装包  一路下一步,就ok</li> <li>检测是否安装成功 node -v</li> <li>运行程序   node ./xxx.js</li></ul> <h2 id="内置对象介绍"><a href="#内置对象介绍" aria-hidden="true" class="header-anchor">#</a> 内置对象介绍</h2> <hr> <h3 id="分类"><a href="#分类" aria-hidden="true" class="header-anchor">#</a> 分类</h3> <ul><li>全局对象:  何时何处都能访问</li> <li>核心对象:  向系统索要,引入即可使用</li> <li>自定义对象:  按路径引入即可</li></ul> <h3 id="process（全局对象）"><a href="#process（全局对象）" aria-hidden="true" class="header-anchor">#</a> process（全局对象）</h3> <ul><li><p>每个系统的环境变量几乎都不一样，可以利用环境变量中的具体某个特定的值来区分不同的机器</p></li> <li><p>process.env 是一个对象，我们可以通过其.属性名来获取具体的环境变量值</p> <ul><li>设置一个特定的环境变量,以达到简单区分不同的机器,从而针对生产/开发环境运行不同的效果</li></ul></li> <li><p>process.argv 获取命令行参数</p></li></ul> <h3 id="filename-dirname（全局对象）"><a href="#filename-dirname（全局对象）" aria-hidden="true" class="header-anchor">#</a> filename/dirname（全局对象）</h3> <ul><li>__filename 获取当前运行文件的目录,绝对路径</li> <li>__dirname 当前运行文件的绝对路径</li></ul> <h3 id="nodejs实现规范"><a href="#nodejs实现规范" aria-hidden="true" class="header-anchor">#</a> nodejs实现规范</h3> <ul><li>CommonJS   :  规范JavaScript语言作为后端语言运行的标准
<ul><li>具备什么能力,该怎么做 ,比如: 具备服务器的功能/  可以操作文件 .....</li> <li>模块应该怎么写: Module :
<ul><li>1:依赖一个模块   require('模块名(id)')</li> <li>2: 需要被模块依赖   module.exports = 给外部的数据</li> <li>3:一个文件是一个模块</li></ul></li></ul></li></ul> <h3 id="核心对象path"><a href="#核心对象path" aria-hidden="true" class="header-anchor">#</a> 核心对象path</h3> <ul><li>1:<code>const path = require('path');</code></li> <li>路径 -&gt; 在处理路径的时候很擅长,但是,其不负责判断路径是否存在文件</li> <li>拼接并修正路径 <code>path.join(__dirname,'a','b');</code> 以当前目录/a/b</li> <li><code>path.resovle('./xxx') 相对转绝对</code></li> <li>接收一个合法的路径字符串，转换成一个对象
<ul><li><code>let pathObj = path.parse(mypath);</code></li></ul></li> <li>接收一个路径对象，转换成一个字符串路径
<ul><li><code>let str = path.format(pathObj);</code></li></ul></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span> root<span class="token punctuation">:</span> <span class="token string">'C:\\'</span><span class="token punctuation">,</span>
  dir<span class="token punctuation">:</span> <span class="token string">'C:\\Users\\孙悟空'</span><span class="token punctuation">,</span>
  base<span class="token punctuation">:</span> <span class="token string">'金箍棒.txt'</span><span class="token punctuation">,</span>   <span class="token comment">// 该属性可以用于修改文件名和后缀</span>
  ext<span class="token punctuation">:</span> <span class="token string">'.txt'</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'金箍棒'</span> <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><strong>注意:path对象是方便我们操作路径的,对于获取来讲: parse解析成对象,format转换成字符串.join拼接并修正.... 对于修改路径对象来讲,可以用base属性更改,不能用name,ext更改</strong></li></ul> <h3 id="模块"><a href="#模块" aria-hidden="true" class="header-anchor">#</a> 模块</h3> <ul><li>弊端
<ul><li>在js中要涉及到逻辑,还要在html中，为逻辑对象考虑引用顺序</li> <li>所有对象默认都是全局对象，命名冲突</li> <li>commonjs规范</li> <li>一个文件就是一个模块
<ul><li>导入用require('./xxx.js');</li> <li>导出用module.exports = xxx;</li> <li>在每一个模块内声明的变量属于模块内的作用域</li></ul></li></ul></li></ul> <h2 id="fs文件模块"><a href="#fs文件模块" aria-hidden="true" class="header-anchor">#</a> fs文件模块</h2> <ul><li>文件读写</li> <li>其他功能</li> <li>扩展介绍</li></ul> <h3 id="操作文件对象"><a href="#操作文件对象" aria-hidden="true" class="header-anchor">#</a> 操作文件对象</h3> <ul><li><p>IO</p> <ul><li>I :input输入</li> <li>O:output 输出</li> <li>文件的操作就是IO</li></ul></li> <li><p>复制文件的过程,  I: 通过计算机,存储文件到剪切板</p> <ul><li>粘贴到指定目录:   O: 通过计算机,将剪切板上的数据,写出到 指定目录</li></ul></li> <li><p>node中有两种IO的操作</p> <ul><li><p>同步IO</p> <ul><li>一行代码(读文件)不执行完毕...后续代码不能执行</li></ul></li> <li><p>异步IO (建议)</p> <ul><li>一行代码(读写文件) 不执行完毕(正在读写中) ... 后续代码也可以执行</li></ul></li> <li><p>代码体验:</p> <ul><li><p>读写文件</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//必须这个名称</span>
<span class="token comment">//读 fs.readFile(路径,回调函数);</span>
<span class="token comment">//写 fs.writeFile(路径,数据,回调函数);</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>总结: 异步的读/写文件  参数1:都是路径,可以相对可以绝对,最后一个参数都是回调函数,回调函数的参数中错误对象优先</p></li></ul></li></ul></li> <li><p>同步和异步IO的区别: 同步IO会阻塞后续代码执行,异步IO不会阻塞后续代码执行</p></li></ul> <h3 id="遍历文件夹下的文件"><a href="#遍历文件夹下的文件" aria-hidden="true" class="header-anchor">#</a> 遍历文件夹下的文件</h3> <ul><li><p>读取文件夹,获取其中所有文件的资源</p></li> <li><p>stat 获取文件状态</p></li> <li><p>readdir 读取文件夹数据</p></li> <li><p>access 判断文件或文件夹是否存在</p></li></ul> <p><img src="/blog/assets/img/1526562073755.e70ae5e7.png" alt="52656207375"></p> <p><img src="/blog/assets/img/1531572185329.0ae5da83.png" alt="1531572185329"></p> <p><img src="/blog/assets/img/1531573934913.4f3c0293.png" alt="1531573934913"></p> <h3 id="包（文件夹）"><a href="#包（文件夹）" aria-hidden="true" class="header-anchor">#</a> 包（文件夹）</h3> <ul><li>多个文件，有效的被组织与管理的一个单位</li> <li>留一个入口</li> <li><strong>包就是一个:文件夹</strong></li></ul> <h3 id="npm-yarn"><a href="#npm-yarn" aria-hidden="true" class="header-anchor">#</a> npm|| yarn</h3> <ul><li>自己先有一个包描述文件（<strong>package.json</strong>)</li> <li>创建一个包描述文件 <code>npm init [-y]</code> <ul><li>会根据当前的文件夹来自动生成包名（<strong>不允许中文，不允许大写英文字母</strong>)</li> <li>默认生成<code>npm init [-y]</code></li></ul></li> <li>下载一个包 <code>npm install art-template jquery@1.5.1 --save</code> <ul><li>记录依赖<code>--save</code></li></ul></li> <li>根据package.json文件中的<code>dependencies</code>属性恢复依赖
<ul><li>恢复包 <code>npm install</code>   简单: <code>npm i</code></li></ul></li> <li>卸载一个包 <code>npm uninstall jquery@1.5.1 --save</code></li> <li>简写```npm un jquery@1.5.1 --S`
<ul><li>下载简单些:<code>npm i 包名</code></li></ul></li> <li><strong>小结:以上简写:  uninstall -&gt; un ,install -&gt; i , --save -&gt; -S</strong></li> <li>查看包的信息
<ul><li><code>npm info jquery</code></li></ul></li> <li>查看包的信息中的某个字段(版本)(掌握)
<ul><li><code>npm info jquery versions</code></li></ul></li> <li>查看包的文档
<ul><li><code>npm docs jquery</code></li></ul></li> <li>安装全局命令行工具
<ul><li><code>npm install -g http-server</code></li></ul></li> <li>卸载全局命令行工具
<ul><li><code>npm uninstall -g http-server</code></li></ul></li> <li>查看全局包的下载路径
<ul><li><code>npm root -g</code></li></ul></li> <li>修改存储目录
<ul><li><code>npm config set prefix &quot;D:\xxx&quot;</code></li> <li>不要node_modules</li> <li>接着，修改环境变量中的path属性
<ul><li>添加或改为<code>D:\xxx</code></li> <li>目的就是为了在任意目录启动 xxx.cmd</li></ul></li> <li>重启命令行</li></ul></li></ul> <h3 id="nrm是npm的镜像源管理工具"><a href="#nrm是npm的镜像源管理工具" aria-hidden="true" class="header-anchor">#</a> nrm是npm的镜像源管理工具</h3> <ul><li>1:全局安装 <code>npm install -g nrm</code></li> <li>2:查看当前可选的镜像源 <code>nrm ls</code></li> <li>3:切换镜像源 <code>nrm use taobao</code></li> <li>添加自己公司私有源 <code>nrm add name http://www.xxx.xxx/</code></li></ul> <h3 id="包的加载机制"><a href="#包的加载机制" aria-hidden="true" class="header-anchor">#</a> 包的加载机制</h3> <ul><li>我们未来可能需要辨识一个包中，入口是否是我们想要的启动程序</li> <li>逐级向上查找node_module,直到盘符根目录</li> <li>1:查找node_modules下的包名文件夹中的main属性(常用)</li> <li>2:不常用:查找node_modules下的包名.js</li> <li>3:查找node_modules下的包名文件夹中的index.js(常用)</li> <li><strong>逐级向上,node_modules,要么main属性,要么index.js</strong></li></ul> <h2 id="事件队列"><a href="#事件队列" aria-hidden="true" class="header-anchor">#</a> 事件队列</h2> <ul><li>主线程--同步任务</li> <li>event loop--异步任务(宏，微)
<ul><li>微任务的优先级高于宏任务</li> <li>process.nextTick()优先于promise.then();</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//主线程</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入主线程</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入event loop(宏)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入event loop(宏)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//主线程</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入主线程</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将then推入event loop(微)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入event loop(宏)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入主线程</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//推入主线程</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//主线程</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/Node.js/Nginx.html">
          Nginx
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/app.cd55051b.js" defer></script><script src="/blog/assets/js/4.8d9cff3d.js" defer></script>
  </body>
</html>
